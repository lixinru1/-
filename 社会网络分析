一．开篇引入
如今，随着科技发达，生活富足，人们尤其是年轻人们很少愿意进行户外运动，很少愿意多运动多活动，不仅如此，在饮食方面也并不注意，不注重营养搭配，而是喜欢吃高热量的食物，因此研究什么因素导致人超重，肥胖等不健康体重变得很重要，本文以下探究的数据集来自uci网站，数据集包含的是来自墨西哥、秘鲁和哥伦比亚三国、年龄在14至61岁以及[1]中提到的不同饮食习惯和身体状况的人肥胖水平估计数据，数据是利用一个网络平台收集的。
因此，基于此数据集和探究目标，将采取IBM spss modeler进行数据分析,具体说明和分析如下。
二．相关工作
相关工作包括选择合适的数据集，根据数据集书籍选择其合适的算法进行分析，同时阅读文献和他人博客进行知识点的学习。
三．方法
一．	问题定义：
1.	根据数据集，想要分析以下几个问题：
1.对引起肥胖的显著性影响因素
2.各种饮食属性和因素与肥胖的关联关系
为探究这两个问题，我选择用modeler对数据进行C5.0和logistics回归分析，从而得到问题答案；
首先将使用IBM spss modeler进行数据分析，具体的将分析问题分为以下四步骤：
1.数据获取与实验内容的初步设计：（1）需要有数据来源的链接，数据获取方式的说明。（2）需要有数据的属性列表，总案例数量等介绍。（3）需要根据数据特征，进行实验的初步设计。
2.基于spss moderler的数据预处理：数据的清洗、集成、转换等（以及标准化、离散化、相关性分析、数据质量评估与调整等等初步分析）
3.基于spss moderler的数据挖掘建模分析：根据数据特征与实验设计的初衷，进行过程建模与结果可视化等步骤的实现。
4.数据挖掘与可视化结果分析：对实验学习的结果模型的准确性分析与可视化结果的分析。


二．	数据
①	数据属性（17个属性和2111条记录）
与饮食习惯相关的属性有：频繁食用高热量食物（FVC）、蔬菜消费频率（FCVC）、主餐数量（NCP）、餐间食物消费量（CAEC）、每日水量（CH20）和酒精消费量（CALC）。
与身体状况相关的属性有：卡路里消耗监测（SCC）、体力活动频率（FAF）、使用技术设备的时间（TUE）、使用运输（MTRANS），获得的其他变量是：性别、年龄、身高和体重。
并创建了类别变量NObesity，其值为：体重不足、正常体重、超重水平为一、超重II级、肥胖III型、肥胖II型和肥胖III型。
其中类别变量Nobesity是根据BMI值的大小来分类的，具体为体重不足 18.5，普通 18.5 到 24.9，超重 25.0 至 29.9，肥胖症 I 30.0 到 34.9，肥胖症 II 35.0 到 39.9，肥胖症 III 高于 40；数据包含数值数据和连续数据。
②	部分数据展示
 

三．	算法
1.	C5.0决策树
根据C5.0即决策树分类算法研究对起肥胖的显著性影响因素（决策树）
 
数据分析过程如下：
1.1.首先进行预处理：
（1）	数据质量评估
构建【数据审核】节点评估数据的质量。主要对数据的缺失、离群点和极端值等情况进行评估。本小组使用平均值、标准差等，来反映数据质量的评价指标，以及数据离群点和极端值的诊断标准。从对于数据的审核结果中可以看到，每一个变量的分布差异并不明显。对于数据的质量结果中清晰的看到原始数据的完整字段占比100%，是相对完整且数据质量较好的数据集。

 
数据审核结果图如下 
 

1.2 利用分区节点，对数据进行分区
训练集和测试集分别占比70%和30%
 
1.3数据分析
进行C5.0决策树分类分析，运行C5.0节点会出现实验结果，实验结果和分析在下面“四.实验及结果”部分，下图的模型选项板，选择“决策树”，修剪严重性调到90%，使决策树更加精简。
目标字段为Nobeyesdad
输入字段为除了身高height 体重weight的其他属性
 
 

2．Logistics回归分析
2.1问题与目标：
在这个数据集中，我想要了解饮食属性与体重水平的关系，来给予那些已经不是正常体重的人帮助和正常体重的人以提示和警醒。为了避免身高和体重这两个直接数据对结论的影响，在分析中会将这两项删去，只考虑有关饮食习惯对于体重水平的影响。

2.2数据分析

Logistics部分为下图黑线左下方部分
 

①	首先，在数据源后添加类型节点，再添加过滤器节点，过滤掉与数据分析的变量，如与身体状态有关的变量。

②添加logistic节点，将因变量NObeyesdad放入因变量（目标）位置，自变量年龄Age，FAVC,蔬菜消费频率 FCVC，主餐食量 NCP , 餐间食物消费量CAEC, 每日水量CH2O，酒精消费量（CALC）放入“输入”位置。

 
③允许logistic节点，实验结果和分析在第四部分
四．实验及结果
1.C5.0决策树实验结果
①下图为预测变量重要性的图，目标为Nobeyesdad即体重的类别；可以看出年龄age是影响目标变量最重要的因素，FCVC蔬菜消费频率和MTRANS使用运输这两个因素也比较重要，分别占有0.15和0.14。
 

②下面展示决策树的部分节点
	首先，第一个节点0为总节点，表示出Nobeyesdad总共分有七类，同时展示出每类所占有的百分比，从中可以看出，在这所有数据中，每类所占比例大致相同，在15%上下浮动。
	而影响其分类的第一个因素是FCVC,即蔬菜消费频率从节点1和节点2中可以看出，有69%的人蔬菜消费频率小于等于2，在这之中有88%的人体重不正常；而中只有31%的人蔬菜消费频率大于等于2，其中有17.4%的人是正常体重。
 
 
 
第二个因素为家族是否有肥胖的人，根据决策树，节点一为蔬菜消费率小于等于2的人，而节点2是蔬菜消费率小于等于2且家族有肥胖的人，这样下来，计算发现，只有0.07%的人拥有正常体重了；节点247中可看出当家族没有肥胖的人的时候，有36.3%的人是体重偏轻，有32%是正常体重；


  

③加入分析节点进一步评估模型结果，展示分析节点和表格节点的结果，从下图可看出在培训集中有84.42%的数据被分类准确，测试集中有86.21%的人被分析准确。
 



2.Logistic回归分析
（1）	模拟拟合优度检验
该假设的原假设是所有纳入自变量的系数为0，P(Sig.)<0.001,说明至少一个变量系数不为0，且具有统计学显著性，也就是模型整体有意义。
 
（2）	参数估计
Parameter Estimates表格给出了参数估计值；分别来看Nobeyesdad的不同类别所对应的影响因素；
对于insufficient_weight组，因素FAVC、FCVC、NCP的P(Sig)>0.001,所以不具有统计学意义；而因素餐间食物消费量CAEC的值为sometimes作为对照组，发现always组合frequently组的P(Sig)<0.001,exp(B)分别为0.078（1/0.078=12.8倍），说明餐间食物消费量为always对体重过轻的影响是餐间食物消费量为sometimes的12.8倍；对于frequently组，exp(B)=0.696(1/0.696=1.43倍)，说明餐间食物消费量为frequently对体重过轻的影响是餐间食物消费量为sometimes的1.43倍;而对于因素AGE和CH2O，分别是对照组正常体重的1.3和1.7倍。

对于Obesity_Type_1:
因素餐间食物消费量CAEC的值为sometimes作为对照组，发现always组合frequently组的P(Sig)<0.001,exp(B)分别为0.035（1/0.035=28.57倍），说明餐间食物消费量为always对体重过轻的影响是餐间食物消费量为sometimes的28.57倍；对于frequently组，exp(B)=0.007(1/0.007=143倍)，说明餐间食物消费量为frequently对体重过轻的影响是餐间食物消费量为sometimes的143倍;
   

总结
从算法C5.0中可以看出，蔬菜消费率和家族肥胖遗传对体重不正常的人起主要影响，因此，对于蔬菜消费频率较少且家族有肥胖遗传的年轻人，要注意自己的体态和身体健康；
从算法logistic中可以看出，餐间食物消费量对体重的不正常其主要影响，对于体重已经不正常的人，要减少餐间食物消费量，注意喝水量，来控制自己的体态。










